/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Client;

/**
 *
 * @author mac
 */
import DAO.PostData;
import MessageObject.MessageObject;
import Messages.Message;
import MongodbHelper.MongoHelper;

import java.net.URI;
import java.util.Scanner;
import javax.websocket.Session;
import org.glassfish.tyrus.client.ClientManager;

public class Client {

    public static final String SERVER = "ws://42.113.213.148:6652/ws/chat";

    public static void main(String[] args) throws Exception {
        ClientManager client = ClientManager.createClient();

        // connect to server
        Scanner scanner = new Scanner(System.in);
        PostData postData = new PostData();
        MongoHelper mongoHelper = new MongoHelper();
        
        System.out.println("Enter username: ");
        String username = scanner.nextLine();
        System.out.println("Enter password: ");
        String password = scanner.nextLine();
        
        String autho = postData.Login(username, password);
        String idOnServer = postData.GetIDByAuthorization(autho);
        //String autho = postData.Login("admin","1234");
        System.out.println("Welcome to Tiny Chat!");
        //String user = postData.GetUsername(autho);
        //String username = scanner.nextLine();

        Session session = (Session) client.connectToServer(ClientEndpoint.class, new URI(SERVER+"/"+autho));
        session.setMaxTextMessageBufferSize(1024 * 1024);
        session.setMaxBinaryMessageBufferSize(1024 * 1024);
        Message sendMessage = new Message();
        System.out.println("Nhập người nhận");
        String nguoiNhan = scanner.next();
        // repeatedly read a message and send it to the server (until quit)
        boolean check = true;
        while (check) {
            System.out.println("Nhập tin nhắn");
            String s = scanner.nextLine();
            Message message1 = new Message();
            message1.setMessage("Gửi Message");
            message1.setType(0);
            //message1.
            MessageObject msg = new MessageObject();
            msg.idReceive = nguoiNhan;
            msg.idSender = s;
            msg.content = "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";
            msg.type = "image";
            msg.nameSender = "";
            message1.setData(msg);
            //System.out.println(formatMessage("You are logged in as: " + username, username));
            System.out.println("You are logged in as: " + username);
            //session.getBasicRemote().sendText(formatMessage((new Gson()).toJson(message1), username));
            API_AUTHEN_CLIENT.sendMessage(message1,session);
        }
    }

}
